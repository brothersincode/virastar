/*!
* Virastar - v0.22.1 - 2025-04-13
* https://github.com/brothersincode/virastar
* Licensed: MIT
*/
((e,r,a)=>{"undefined"!=typeof module?module.exports=a():"function"==typeof define&&"object"==typeof define.amd?define(a):"undefined"!=typeof window?window[e]=a():r[e]=a()})("Virastar",this,function(){function a(e,r){if(!(this instanceof a))return new a(e,r);if("object"==typeof(e=e||{}))this.opts=f(e);else if("string"==typeof e)return this.opts=f(r||{}),n(e);return this}function f(e){var r,a=Object.assign({},_);for(r in a)e.hasOwnProperty(r)&&(a[r]=e[r]);return a}function o(e,r,a){var _,n=r.split(""),c=a.split("");for(_ in n)e=e.replace(g(n[_]),c[_]);return e}function g(e,r){return new RegExp(e,r||"g")}var $="ءاآأإئؤبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهیةيك",m="ًٌٍَُِّْ",h="([A-Za-z][A-Za-z0-9+\\-.]*):(?:(//)(?:((?:[A-Za-z0-9\\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*)@)?((?:\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\.[A-Za-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*))(?::([0-9]*))?((?:/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)|/((?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?)|((?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)|)(?:\\?((?:[A-Za-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*))?(?:\\#((?:[A-Za-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*))?",E="\\s.,;،؛!؟?\"'()[\\]{}“”«»",_={cleanup_begin_and_end:!0,cleanup_extra_marks:!0,cleanup_kashidas:!0,cleanup_line_breaks:!0,cleanup_rlm:!0,cleanup_spacing:!0,cleanup_zwnj:!0,decode_htmlentities:!0,fix_arabic_numbers:!0,fix_dashes:!0,fix_diacritics:!0,fix_english_numbers:!0,fix_english_quotes_pairs:!0,fix_english_quotes:!0,fix_hamzeh:!0,fix_hamzeh_arabic:!1,fix_misc_non_persian_chars:!0,fix_misc_spacing:!0,fix_numeral_symbols:!0,fix_perfix_spacing:!0,fix_persian_glyphs:!0,fix_punctuations:!0,fix_question_mark:!0,fix_spacing_for_braces_and_quotes:!0,fix_spacing_for_punctuations:!0,fix_suffix_misc:!0,fix_suffix_spacing:!0,fix_three_dots:!0,kashidas_as_parenthetic:!0,markdown_normalize_braces:!0,markdown_normalize_lists:!0,normalize_dates:!0,normalize_ellipsis:!0,remove_spaces_before_ellipsis:!0,normalize_eol:!0,preserve_braces:!1,preserve_brackets:!1,preserve_comments:!0,preserve_entities:!0,preserve_frontmatter:!0,preserve_HTML:!0,preserve_nbsps:!0,preserve_URIs:!0,remove_diacritics:!1,skip_markdown_ordered_lists_numbers_conversion:!1},d="۱۲۳۴۵۶۷۸۹۰",R={"sbquo;":"‚","lsquo;":"‘","lsquor;":"‚","ldquo;":"“","ldquor;":"„","rdquo;":"”","rdquor;":"”","rsquo;":"’","rsquor;":"’","apos;":"'","QUOT;":'"',QUOT:'"',"quot;":'"',quot:'"',"zwj;":"‍","ZWNJ;":"‌","zwnj;":"‌","not;":"¬","shy;":"­"},x={"‌ه":"ﻫ","ی‌":"ﻰﻲ","ﺃ":"ﺄﺃ","ﺁ":"ﺁﺂ","ﺇ":"ﺇﺈ","ا":"ﺎا","ب":"ﺏﺐﺑﺒ","پ":"ﭖﭗﭘﭙ","ت":"ﺕﺖﺗﺘ","ث":"ﺙﺚﺛﺜ","ج":"ﺝﺞﺟﺠ","چ":"ﭺﭻﭼﭽ","ح":"ﺡﺢﺣﺤ","خ":"ﺥﺦﺧﺨ","د":"ﺩﺪ","ذ":"ﺫﺬ","ر":"ﺭﺮ","ز":"ﺯﺰ","ژ":"ﮊﮋ","س":"ﺱﺲﺳﺴ","ش":"ﺵﺶﺷﺸ","ص":"ﺹﺺﺻﺼ","ض":"ﺽﺾﺿﻀ","ط":"ﻁﻂﻃﻄ","ظ":"ﻅﻆﻇﻈ","ع":"ﻉﻊﻋﻌ","غ":"ﻍﻎﻏﻐ","ف":"ﻑﻒﻓﻔ","ق":"ﻕﻖﻗﻘ","ک":"ﮎﮏﮐﮑﻙﻚﻛﻜ","گ":"ﮒﮓﮔﮕ","ل":"ﻝﻞﻟﻠ","م":"ﻡﻢﻣﻤ","ن":"ﻥﻦﻧﻨ","ه":"ﻩﻪﻫﻬ","هٔ":"ﮤﮥ","و":"ﻭﻮ","ﺅ":"ﺅﺆ","ی":"ﯼﯽﯾﯿﻯﻰﻱﻲﻳﻴ","ئ":"ﺉﺊﺋﺌ","لا":"ﻼ","ﻹ":"ﻺ","ﻷ":"ﻸ","ﻵ":"ﻶ","!":"ǃ"};function n(e,r){if("string"!=typeof e)throw new TypeError("Expected a String, but received "+typeof e);var s,a,_,n,c,t,i,p,u,l;return e.trim()&&(s=r?f(r):this.opts,e=" "+e+" ",s.preserve_frontmatter&&(a=[],e=e.replace(/^ ---[\S\s]*?---\n/g,function(e){return a.push(e)," __FRONTMATTER__PRESERVER__ "})),s.preserve_HTML&&(_=[],e=e.replace(/<\/?[a-z][^>]*?>/gi,function(e){return _.push(e)," __HTML__PRESERVER__ "})),s.preserve_comments&&(n=[],e=e.replace(/<!--[\s\S]*?-->/g,function(e){return n.push(e)," __COMMENT__PRESERVER__ "})),s.preserve_brackets&&(c=[],e=e.replace(/(\[.*?\])/g,function(e){return c.push(e)," __BRACKETS__PRESERVER__ "})),s.preserve_braces&&(t=[],e=e.replace(/(\{.*?\})/g,function(e){return t.push(e)," __BRACES__PRESERVER__ "})),s.preserve_URIs&&(i=[],p=[],e=(e=e.replace(/]\((.*?)\)/g,function(e,r){return r?(i.push(r.trim()),"](__MD_LINK__PRESERVER__)"):e})).replace(g(h),function(e){return p.push(e)," __URI__PRESERVER__ "})),s.preserve_nbsps&&(u=[],e=e.replace(/&nbsp;|&#160;/gi,function(e){return u.push(e)," __NBSPS__PRESERVER__ "})),s.decode_htmlentities&&(e=e.replace(/&(#?[^;\W]+;?)/g,function(e,r){var a,_;return(a=/^#(\d+);?$/.exec(r))?String.fromCharCode(parseInt(a[1],10)):(a=/^#[Xx]([A-Fa-f0-9]+);?/.exec(r))?String.fromCharCode(parseInt(a[1],16)):(_=(a=/;$/.test(r))?r.replace(/;$/,""):r,"number"==typeof(_=R[_]||a&&R[r])?String.fromCharCode(_):"string"==typeof _?_:"&"+r)})),s.preserve_entities&&(l=[],e=e.replace(/&(#?[^;\W]+;?)/g,function(e){return l.push(e)," __ENTITIES__PRESERVER__ "})),s.normalize_eol&&(e=e.replace(/(\r?\n)|(\r\n?)/g,"\n")),s.fix_persian_glyphs&&(e=((e,r)=>{for(var a in r)r.hasOwnProperty(a)&&(e=e.replace(g("["+r[a]+"]"),a));return e})(e,x)),s.fix_misc_non_persian_chars&&(e=o(e,"كڪيےىۍېہە","ککیییییههه")),s.fix_dashes&&(e=e.replace(/-{3}/g,"—").replace(/-{2}/g,"–")),s.fix_three_dots&&(e=A(e)),s.normalize_ellipsis&&(e=v(e)),s.remove_spaces_before_ellipsis&&(e=e.replace(/[ \t]*…/g,"…")),s.fix_english_quotes_pairs&&(e=e.replace(/(“)(.+?)(”)/g,"«$2»")),s.fix_english_quotes&&(e=e.replace(/(["'`]+)(.+?)(\1)/g,"«$2»")),s.fix_hamzeh?e=(e=s.fix_hamzeh_arabic?e.replace(/(\S)ة([\s\u200c\u200e])/g,"$1هٔ$2"):e).replace(/(\S)(ه[\s\u200c\u200e]+[یي])([\s\u200c\u200e])/g,"$1هٔ$3").replace(/(\S)(ه[\s\u200c\u200e]?\u0621)([\s\u200c\u200e])/g,"$1هٔ$3").replace(/(ۀ|هٓ)/g,"هٔ"):s.fix_suffix_spacing&&(s.fix_hamzeh_arabic&&(e=e.replace(/(\S)ة([\s\u200c\u200e])/g,"$1ه‌ی$2")),r="$1ه‌ی$3",e=e.replace(/(\S)(ه[\s\u200c]+[یي])([\s\u200c])/g,r).replace(/(\S)(ه[\s\u200c]?\u0621)([\s\u200c])/g,r).replace(/(\S)(ه[\s\u200c]?\u0654)([\s\u200c])/g,r)),s.cleanup_rlm&&(e=e.replace(/([^a-zA-Z\-_])(\u200F)/g,"$1‌")),s.cleanup_zwnj&&(e=e.replace(/\u00ad/g,"‌").replace(/\u00ac/g,"‌").replace(/\u200c{2,}/g,"‌").replace(/\u200c([\w\s0-9۰-۹[\](){}«»“”.…,:;?!$%@#*=+\-/\\،؛٫٬×٪؟ـ])/g,"$1").replace(/([\w\s0-9۰-۹[\](){}«»“”.…,:;?!$%@#*=+\-/\\،؛٫٬×٪؟ـ])\u200c/g,"$1").replace(/(^\u200c|\u200c$)/gm,"")),e=(e=s.fix_arabic_numbers?o(e,"١٢٣٤٥٦٧٨٩٠",d):e).replace(/(^|\s+)([[({"'“«]?)(\S+)([\])}"'”»]?)(?=($|\s+))/g,function(e,r,a,_,n,c){return _.match(/[a-zA-Z\-_]{2,}/g)||_.match(/%(?:\d+\$)?[+-]?(?:[ 0]|'.{1})?-?\d*(?:\.\d+)?[bcdeEufFgGosxX]/g)||_.match(/&#\d+;/g)||s.skip_markdown_ordered_lists_numbers_conversion&&(e+n+c).match(/(?:(?:\r?\n)|(?:\r\n?)|(?:^|\n))\d+\.\s/)||(s.fix_english_numbers&&(e=o(e,"1234567890",d)),s.fix_numeral_symbols&&(e=e.replace(/([۰-۹]) ?%/g,"$1٪").replace(/([۰-۹])\.(?=[۰-۹])/g,"$1٫").replace(/([۰-۹]),(?=[۰-۹])/g,"$1٬")),s.fix_punctuations&&(e=o(e,",;","،؛")),s.fix_question_mark&&(e=e.replace(/(\?)/g,"؟"))),e}),s.normalize_dates&&(e=e.replace(/([0-9۰-۹]{1,2})([/-])([0-9۰-۹]{1,2})\2([0-9۰-۹]{4})/g,function(e,r,a,_,n){return n+"/"+_+"/"+r})),s.fix_perfix_spacing&&(e=e.replace(/((\s|^)ن?می) ([^ ])/g,"$1‌$3").replace(/((\s|^)بی) ([^ ])/g,"$1‌$3")),s.fix_suffix_spacing&&(r="$1‌$2",e=e.replace(g("(["+$+m+"]) (ها(ی)?["+E+"])"),r).replace(g("(["+$+m+"]) ((ام|ات|اش|ای|اید|ایم|اند|مان|تان|شان)["+E+"])"),r).replace(g("(["+$+m+"]) (تر((ی)|(ین))?["+E+"])"),r).replace(g("(["+$+m+"]) ((هایی|هایم|هایت|هایش|هایمان|هایتان|هایشان)["+E+"])"),r)),s.fix_suffix_misc&&(e=e.replace(/(\S)ه[\u200c\u200e][ئی]ی([\s\u200c\u200e])/g,"$1ه‌ای$2")),s.fix_spacing_for_braces_and_quotes&&(r=" $1$2$3 ",e=e.replace(/[ \t\u200c]*(\()\s*([^)]+?)\s*?(\))[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(\[)\s*([^\]]+?)\s*?(\])[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(\{)\s*([^}]+?)\s*?(\})[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(“)\s*([^”]+?)\s*?(”)[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(«)\s*([^»]+?)\s*?(»)[ \t\u200c]*/g,r)),s.cleanup_extra_marks&&(e=e.replace(/([؟?!])([ ]+)(?=[؟?!])/g,"$1").replace(/(!){2,}/g,"$1").replace(/(\u061F|\?){2,}/g,"$1").replace(/(!)([ \t]*)([\u061F?])/g,"$3$1")),s.fix_spacing_for_punctuations&&(e=e.replace(/[ \t\u200c]*([:;,؛،.؟?!]{1})/g,"$1").replace(/([:;,؛،.؟?!]{1})[ \t\u200c]*(?!\n|_{2})/g,"$1 ").replace(/([0-9۰-۹]+):\s+([0-9۰-۹]+)/g,"$1:$2").replace(/([0-9۰-۹]+)\. ([0-9۰-۹]+)/g,"$1.$2").replace(/([\w\-_]+)\. (ir|com|org|net|info|edu|me)([\s/\\\])»:;.])/g,"$1.$2$3").replace(/([؟?!])([ ]+)(?=[؟?!])/g,"$1")),s.kashidas_as_parenthetic&&(e=e.replace(/(\s)\u0640+/g,"$1–").replace(/\u0640+(\s)/g,"–$1")),s.cleanup_kashidas&&(e=e.replace(/([0-9۰-۹]+)ـ+([0-9۰-۹]+)/g,"$1–$2").replace(/([^\s.])\u0640+(?![\s.])/g,"$1")),s.markdown_normalize_braces&&(e=e.replace(/! (\[.*?\])[ ]?(\(.*?\))[ ]?/g,"!$1$2").replace(/(\[.*?\])[ \t]+(\(.*?\))/g,"$1$2").replace(/\(\([ \t]*(.*?)[ \t]*\)\)/g,"(($1))").replace(/\[\[[ \t]*(.*?)[ \t]*\]\]/g,"[[$1]]").replace(/\{\{[ \t]*(.*?)[ \t]*\}\}/g,"{{$1}}").replace(/\{\{\{[ \t]*(.*?)[ \t]*\}\}\}/g,"{{{$1}}}").replace(/(\(\(.*\))[ \t]+(\))/g,"$1$2").replace(/(\[\[.*\])[ \t]+(\])/g,"$1$2").replace(/(\{\{.*\})[ \t]+(\})/g,"$1$2")),s.markdown_normalize_lists&&(e=e.replace(/((\n|^)\*.*?)\n+(?=\n\*)/g,"$1").replace(/((\n|^)-.*?)\n+(?=\n-)/g,"$1").replace(/((\n|^)#.*?)\n+(?=\n#)/g,"$1")),s.fix_spacing_for_braces_and_quotes&&(r="$1$2$3",e=e.replace(/(\()\s*([^)]+?)\s*?(\))/g,r).replace(/(\[)\s*([^\]]+?)\s*?(\])/g,r).replace(/(\{)\s*([^}]+?)\s*?(\})/g,r).replace(/(“)\s*([^”]+?)\s*?(”)/g,r).replace(/(«)\s*([^»]+?)\s*?(»)/g,r).replace(/(\(\[.*?\]\(.*?\))\s+(\))/g,"$1$2")),s.fix_misc_spacing&&(e=e.replace(/ \((ص|عج|س|ع|ره)\)/g,"($1)").replace(/ \[([0-9۰-۹]+)\]/g,"[$1]")),s.remove_diacritics?e=e.replace(g("["+m+"]+"),""):s.fix_diacritics&&(e=e.replace(g("‌(["+m+"])"),"$1").replace(g("(["+m+"])\\1+"),"$1").replace(g("(\\S)[ ]+(["+m+"])"),"$1$2")),s.cleanup_spacing&&(e=e.replace(/([^_])([ ]{2,})(?![_]{2}|\n)/g,"$1 ").replace(/^\n([\t\u0020\u200c\u200d\u00a0]*)\n$/gm,"\n\n")),s.cleanup_zwnj&&(e=e.replace(/([إأةؤورزژاآدذ،؛,:«»\\/@#$٪×*()ـ\-=|])\u200c/g,"$1")),s.cleanup_line_breaks&&(e=e.replace(/\n[\s\u200c]*\n/g,"\n\n").replace(/\n{2,}/g,"\n\n")),s.preserve_entities&&(e=e.replace(/[ ]?__ENTITIES__PRESERVER__[ ]?/g,function(){return l.shift()})),s.preserve_nbsps&&(e=e.replace(/[ ]?__NBSPS__PRESERVER__[ ]?/g,function(){return u.shift()})),s.preserve_URIs&&(e=(e=e.replace(/__MD_LINK__PRESERVER__/g,function(){return i.shift()})).replace(/[ ]?__URI__PRESERVER__[ ]?/g,function(){return p.shift()})),s.preserve_braces&&(e=e.replace(/[ ]?__BRACES__PRESERVER__[ ]?/g,function(){return t.shift()})),s.preserve_brackets&&(e=e.replace(/[ ]?__BRACKETS__PRESERVER__[ ]?/g,function(){return c.shift()})),s.preserve_comments&&(e=e.replace(/[ ]?__COMMENT__PRESERVER__[ ]?/g,function(){return n.shift()})),s.preserve_HTML&&(e=e.replace(/[ ]?__HTML__PRESERVER__[ ]?/g,function(){return _.shift()})),s.preserve_frontmatter&&(e=e.replace(/[ ]?__FRONTMATTER__PRESERVER__[ ]?/g,function(){return a.shift()})),e=s.cleanup_begin_and_end?e.replace(/([\n]+)[ \t\u200c\u00a0]*/g,"$1").replace(/^[\s\u200c\u200e\u200f]+|[\s\u200c\u200e\u200f]+$/g,""):e.replace(/^[ ]/g,"").replace(/[ ]$/g,"")),e}function A(e){return e.replace(/\.([ ]+)(?=[.])/g,".").replace(/\.{3,}/g,"…")}function v(e){return e.replace(/(…){2,}/g,"…").replace(/[ ]{2,}…/," …").replace(/…[ \t\u200c]*/,"… ")}return a.prototype={defaults:_,cleanup:n,convertPersianNumbers:function(e){return e.replace(/[\u0660-\u0669\u06f0-\u06f9]/g,function(e){return 15&e.charCodeAt(0)})},flipPunctuations:function(e){var r=["-"],a=["!",".","،","…",'"'],_=[],n=[];e=A(e);for(var c=0;c<a.length;c++){var s=a[c],t=g("^\\"+s,"i");t.test(e)&&(e=e.replace(t,"").trim(),n.push(s))}for(var i=0;i<r.length;i++){var p=r[i],u=g("\\"+p+"$","i");u.test(e)&&(e=e.replace(u,"").trim(),_.push(p))}for(var l=0;l<_.length;l++)e=_[l]+" "+e;for(var f=0;f<n.length;f++)e+=n[f];return v(e)},reverseString:function e(r){return""===r?"":e(r.substr(1))+r.charAt(0)},swapQuotes:function(e){return e.replace(/(»)(.+?)(«)/g,"«$2»").replace(/(”)(.+?)(“)/g,"“$2”")}},a});
