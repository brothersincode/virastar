/*!
* Virastar - v0.21.0 - 2020-05-14
* https://github.com/brothersincode/virastar
* Licensed: MIT
*/
!function(e,r,n){"undefined"!=typeof module?module.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):"undefined"!=typeof window?window[e]=n():r[e]=n()}("Virastar",this,function(){function e(n,a){if(!(this instanceof e))return new e(n,a);if(n=n||{},"object"==typeof n)this.opts=r(n);else if("string"==typeof n)return this.opts=r(a||{}),c(n);return this}function r(e){var r=Object.assign({},J);for(var n in r)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function n(e,r,n){var a=r.split(""),c=n.split("");for(var _ in a)e=e.replace(t(a[_]),c[_]);return e}function a(e,r){for(var n in r)r.hasOwnProperty(n)&&(e=e.replace(t("["+r[n]+"]"),n));return e}function t(e,r){return new RegExp(e,r||"g")}function c(e,n){if("string"!=typeof e)throw new TypeError("Expected a String, but received "+typeof e);if(!e.trim())return e;var a=n?r(n):this.opts;if(e=" "+e+" ",a.preserve_frontmatter){var c=[];e=e.replace(/^ ---[\S\s]*?---\n/g,function(e){return c.push(e)," __FRONTMATTER__PRESERVER__ "})}if(a.preserve_HTML){var A=[];e=e.replace(/<\/?[a-z][^>]*?>/gi,function(e){return A.push(e)," __HTML__PRESERVER__ "})}if(a.preserve_comments){var K=[];e=e.replace(/<!--[\s\S]*?-->/g,function(e){return K.push(e)," __COMMENT__PRESERVER__ "})}if(a.preserve_brackets){var Q=[];e=e.replace(/(\[.*?\])/g,function(e){return Q.push(e)," __BRACKETS__PRESERVER__ "})}if(a.preserve_braces){var W=[];e=e.replace(/(\{.*?\})/g,function(e){return W.push(e)," __BRACES__PRESERVER__ "})}if(a.preserve_URIs){var D=[],G=[];e=e.replace(/]\((.*?)\)/g,function(e,r){return r?(D.push(r.trim()),"](__MD_LINK__PRESERVER__)"):e}),e=e.replace(t(X),function(e){return G.push(e)," __URI__PRESERVER__ "})}if(a.preserve_nbsps){var J=[];e=e.replace(/&nbsp;|&#160;/gi,function(e){return J.push(e)," __NBSPS__PRESERVER__ "})}if(a.decode_htmlentities&&(e=i(e)),a.preserve_entities){var Y=[];e=e.replace(/&(#?[^;\W]+;?)/g,function(e){return Y.push(e)," __ENTITIES__PRESERVER__ "})}return a.normalize_eol&&(e=s(e)),a.fix_persian_glyphs&&(e=R(e)),a.fix_dashes&&(e=p(e)),a.fix_three_dots&&(e=f(e)),a.normalize_ellipsis&&(e=o(e)),a.fix_english_quotes_pairs&&(e=l(e)),a.fix_english_quotes&&(e=g(e)),a.fix_hamzeh?(a.fix_hamzeh_arabic&&(e=m(e)),e=$(e)):a.fix_suffix_spacing&&(a.fix_hamzeh_arabic&&(e=h(e)),e=T(e)),a.cleanup_rlm&&(e=E(e)),a.cleanup_zwnj&&(e=_(e)),a.fix_arabic_numbers&&(e=x(e)),e=e.replace(/(^|\s+)([[({"'“«]?)(\S+)([\])}"'”»]?)(?=($|\s+))/g,function(e,r,n,t,c,_){return t.match(/[a-zA-Z\-_]{2,}/g)?e:t.match(/%(?:\d+\$)?[+-]?(?:[ 0]|'.{1})?-?\d*(?:\.\d+)?[bcdeEufFgGosxX]/g)?e:t.match(/&#\d+;/g)?e:a.skip_markdown_ordered_lists_numbers_conversion&&(e+c+_).match(/(?:(?:\r?\n)|(?:\r\n?)|(?:^|\n))\d+\.\s/)?e:(a.fix_english_numbers&&(e=v(e)),a.fix_numeral_symbols&&(e=S(e)),a.fix_punctuations&&(e=F(e)),a.fix_misc_non_persian_chars&&(e=d(e)),a.fix_question_mark&&(e=z(e)),e)}),a.normalize_dates&&(e=b(e)),a.fix_perfix_spacing&&(e=w(e)),a.fix_suffix_spacing&&(e=P(e)),a.fix_suffix_misc&&(e=k(e)),a.fix_spacing_for_braces_and_quotes&&(e=C(e)),a.cleanup_extra_marks&&(e=q(e)),a.fix_spacing_for_punctuations&&(e=Z(e)),a.kashidas_as_parenthetic&&(e=V(e)),a.cleanup_kashidas&&(e=y(e)),a.markdown_normalize_braces&&(e=M(e)),a.markdown_normalize_lists&&(e=N(e)),a.fix_spacing_for_braces_and_quotes&&(e=I(e)),a.fix_misc_spacing&&(e=O(e)),a.remove_diacritics?e=L(e):a.fix_diacritics&&(e=j(e)),a.cleanup_spacing&&(e=U(e)),a.cleanup_zwnj&&(e=u(e)),a.cleanup_line_breaks&&(e=B(e)),a.preserve_entities&&(e=e.replace(/[ ]?__ENTITIES__PRESERVER__[ ]?/g,function(){return Y.shift()})),a.preserve_nbsps&&(e=e.replace(/[ ]?__NBSPS__PRESERVER__[ ]?/g,function(){return J.shift()})),a.preserve_URIs&&(e=e.replace(/__MD_LINK__PRESERVER__/g,function(){return D.shift()}),e=e.replace(/[ ]?__URI__PRESERVER__[ ]?/g,function(){return G.shift()})),a.preserve_braces&&(e=e.replace(/[ ]?__BRACES__PRESERVER__[ ]?/g,function(){return W.shift()})),a.preserve_brackets&&(e=e.replace(/[ ]?__BRACKETS__PRESERVER__[ ]?/g,function(){return Q.shift()})),a.preserve_comments&&(e=e.replace(/[ ]?__COMMENT__PRESERVER__[ ]?/g,function(){return K.shift()})),a.preserve_HTML&&(e=e.replace(/[ ]?__HTML__PRESERVER__[ ]?/g,function(){return A.shift()})),a.preserve_frontmatter&&(e=e.replace(/[ ]?__FRONTMATTER__PRESERVER__[ ]?/g,function(){return c.shift()})),e=a.cleanup_begin_and_end?H(e):e.replace(/^[ ]/g,"").replace(/[ ]$/g,"")}function _(e){return e.replace(/\u00ad/g,"‌").replace(/\u200c{2,}/g,"‌").replace(/\u200c([\w\s0-9۰-۹[\](){}«»“”.…,:;?!$%@#*=+\-\/\\،؛٫٬×٪؟ـ])/g,"$1").replace(/([\w\s0-9۰-۹[\](){}«»“”.…,:;?!$%@#*=+\-\/\\،؛٫٬×٪؟ـ])\u200c/g,"$1").replace(/(^\u200c|\u200c$)/gm,"")}function u(e){return e.replace(/([إأةؤورزژاآدذ،؛,:«»\\\/@#$٪×*()ـ\-=|])\u200c/g,"$1")}function i(e){return e.replace(/&(#?[^;\W]+;?)/g,function(e,r){var n;if(n=/^#(\d+);?$/.exec(r))return String.fromCharCode(parseInt(n[1],10));if(n=/^#[Xx]([A-Fa-f0-9]+);?/.exec(r))return String.fromCharCode(parseInt(n[1],16));var a=/;$/.test(r),t=a?r.replace(/;$/,""):r,c=ee[t]||a&&ee[r];return"number"==typeof c?String.fromCharCode(c):"string"==typeof c?c:"&"+r})}function s(e){return e.replace(/(\r?\n)|(\r\n?)/g,"\n")}function p(e){return e.replace(/-{3}/g,"—").replace(/-{2}/g,"–")}function f(e){return e.replace(/\.([ ]+)(?=[.])/g,".").replace(/[ \t]*\.{3,}/g,"…")}function o(e){return e.replace(/(…){2,}/g,"…").replace(/([ ]{1,})*…[ \t\u200c]*/g,"$1… ")}function l(e){return e.replace(/(“)(.+?)(”)/g,"«$2»")}function g(e){return e.replace(/(["'`]+)(.+?)(\1)/g,"«$2»")}function $(e){var r="$1هٔ$3";return e.replace(/(\S)(ه[\s\u200c\u200e]+[یي])([\s\u200c\u200e])/g,r).replace(/(\S)(ه[\s\u200c\u200e]?\u0621)([\s\u200c\u200e])/g,r).replace(/(ۀ|هٓ)/g,"هٔ")}function m(e){return e.replace(/(\S)ة([\s\u200c\u200e])/g,"$1هٔ$2")}function h(e){return e.replace(/(\S)ة([\s\u200c\u200e])/g,"$1ه‌ی$2")}function E(e){return e.replace(/([^a-zA-Z\-_])(\u200F)/g,"$1‌")}function R(e){return a(e,re)}function d(e){return n(e,"كڪيىۍېہە","ککییییههه")}function v(e){return n(e,"1234567890",Y)}function x(e){return n(e,"١٢٣٤٥٦٧٨٩٠",Y)}function A(e){return e.replace(/[\u0660-\u0669\u06f0-\u06f9]/g,function(e){return 15&e.charCodeAt(0)})}function S(e){return e.replace(/([۰-۹]) ?%/g,"$1٪").replace(/([۰-۹])\.(?=[۰-۹])/g,"$1٫").replace(/([۰-۹]),(?=[۰-۹])/g,"$1٬")}function b(e){return e.replace(/([0-9۰-۹]{1,2})([\/-])([0-9۰-۹]{1,2})\2([0-9۰-۹]{4})/g,function(e,r,n,a,t){return t+"/"+a+"/"+r})}function F(e){return n(e,",;","،؛")}function z(e){return e.replace(/(\?)/g,"؟")}function w(e){var r="$1‌$3";return e.replace(/((\s|^)ن?می) ([^ ])/g,r).replace(/((\s|^)بی) ([^ ])/g,r)}function P(e){var r="$1‌$2";return e.replace(t("(["+W+D+"]) (ها(ی)?["+G+"])"),r).replace(t("(["+W+D+"]) ((ام|ات|اش|ای|اید|ایم|اند|مان|تان|شان)["+G+"])"),r).replace(t("(["+W+D+"]) (تر((ی)|(ین))?["+G+"])"),r).replace(t("(["+W+D+"]) ((هایی|هایم|هایت|هایش|هایمان|هایتان|هایشان)["+G+"])"),r)}function T(e){var r="$1ه‌ی$3";return e.replace(/(\S)(ه[\s\u200c]+[یي])([\s\u200c])/g,r).replace(/(\S)(ه[\s\u200c]?\u0621)([\s\u200c])/g,r).replace(/(\S)(ه[\s\u200c]?\u0654)([\s\u200c])/g,r)}function k(e){return e.replace(/(\S)ه[\u200c\u200e][ئی]ی([\s\u200c\u200e])/g,"$1ه‌ای$2")}function q(e){return e.replace(/([؟?!])([ ]+)(?=[؟?!])/g,"$1").replace(/(!){2,}/g,"$1").replace(/(\u061F|\?){2,}/g,"$1").replace(/(!)([ \t]*)([\u061F?])/g,"$3$1")}function V(e){return e.replace(/(\s)\u0640+/g,"$1–").replace(/\u0640+(\s)/g,"–$1")}function y(e){return e.replace(/([0-9۰-۹]+)ـ+([0-9۰-۹]+)/g,"$1–$2").replace(/([^\s.])\u0640+(?![\s.])/g,"$1")}function Z(e){return e.replace(/[ \t\u200c]*([:;,؛،.؟?!]{1})/g,"$1").replace(/([:;,؛،.؟?!]{1})[ \t\u200c]*(?!\n|_{2})/g,"$1 ").replace(/([0-9۰-۹]+):\s+([0-9۰-۹]+)/g,"$1:$2").replace(/([0-9۰-۹]+)\. ([0-9۰-۹]+)/g,"$1.$2").replace(/([\w\-_]+)\. (ir|com|org|net|info|edu|me)([\s\/\\\])»:;.])/g,"$1.$2$3").replace(/([؟?!])([ ]+)(?=[؟?!])/g,"$1")}function C(e){var r=" $1$2$3 ";return e.replace(/[ \t\u200c]*(\()\s*([^)]+?)\s*?(\))[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(\[)\s*([^\]]+?)\s*?(\])[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(\{)\s*([^}]+?)\s*?(\})[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(“)\s*([^”]+?)\s*?(”)[ \t\u200c]*/g,r).replace(/[ \t\u200c]*(«)\s*([^»]+?)\s*?(»)[ \t\u200c]*/g,r)}function I(e){var r="$1$2$3";return e.replace(/(\()\s*([^)]+?)\s*?(\))/g,r).replace(/(\[)\s*([^\]]+?)\s*?(\])/g,r).replace(/(\{)\s*([^}]+?)\s*?(\})/g,r).replace(/(“)\s*([^”]+?)\s*?(”)/g,r).replace(/(«)\s*([^»]+?)\s*?(»)/g,r).replace(/(\(\[.*?\]\(.*?\))\s+(\))/g,"$1$2")}function M(e){return e.replace(/! (\[.*?\])[ ]?(\(.*?\))[ ]?/g,"!$1$2").replace(/(\[.*?\])[ \t]+(\(.*?\))/g,"$1$2").replace(/\(\([ \t]*(.*?)[ \t]*\)\)/g,"(($1))").replace(/\[\[[ \t]*(.*?)[ \t]*\]\]/g,"[[$1]]").replace(/\{\{[ \t]*(.*?)[ \t]*\}\}/g,"{{$1}}").replace(/\{\{\{[ \t]*(.*?)[ \t]*\}\}\}/g,"{{{$1}}}").replace(/(\(\(.*\))[ \t]+(\))/g,"$1$2").replace(/(\[\[.*\])[ \t]+(\])/g,"$1$2").replace(/(\{\{.*\})[ \t]+(\})/g,"$1$2")}function N(e){return e.replace(/((\n|^)\*.*?)\n+(?=\n\*)/g,"$1").replace(/((\n|^)-.*?)\n+(?=\n-)/g,"$1").replace(/((\n|^)#.*?)\n+(?=\n#)/g,"$1")}function O(e){return e.replace(/ \((ص|عج|س|ع|ره)\)/g,"($1)").replace(/ \[([0-9۰-۹]+)\]/g,"[$1]")}function j(e){return e.replace(t("‌(["+D+"])"),"$1").replace(t("(.*)(["+D+"]){2,}(.*)"),"$1$2$3").replace(t("(\\S)[ ]+(["+D+"])"),"$1$2")}function L(e){return e.replace(t("["+D+"]+"),"")}function U(e){return e.replace(/([^_])([ ]{2,})(?![_]{2}|\n)/g,"$1 ").replace(/\n[\s\u200c]*\n/g,"\n\n")}function B(e){return e.replace(/\n{2,}/g,"\n\n")}function H(e){return e.replace(/([\n]+)[ \t\u200c\u00a0]*/g,"$1").replace(/^[\s\u200c\u200e\u200f]+|[\s\u200c\u200e\u200f]+$/g,"")}function K(e){var r=["-"],n=["!",".","،","…",'"'],a=[],c=[];e=f(e);for(var _=0;_<n.length;_++){var u=n[_],i=t("^\\"+u,"i");i.test(e)&&(e=e.replace(i,"").trim(),c.push(u))}for(var s=0;s<r.length;s++){var p=r[s],l=t("\\"+p+"$","i");l.test(e)&&(e=e.replace(l,"").trim(),a.push(p))}for(var g=0;g<a.length;g++)e=a[g]+" "+e;for(var $=0;$<c.length;$++)e+=c[$];return o(e)}function Q(e){return e.replace(/(»)(.+?)(«)/g,"«$2»").replace(/(”)(.+?)(“)/g,"“$2”")}var W="ءاآأإئؤبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهیةيك",D="ًٌٍَُِّْ",X="([A-Za-z][A-Za-z0-9+\\-.]*):(?:(//)(?:((?:[A-Za-z0-9\\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*)@)?((?:\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\.[A-Za-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*))(?::([0-9]*))?((?:/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)|/((?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?)|((?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)|)(?:\\?((?:[A-Za-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*))?(?:\\#((?:[A-Za-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*))?",G="\\s.,;،؛!؟?\"'()[\\]{}“”«»",J={cleanup_begin_and_end:!0,cleanup_extra_marks:!0,cleanup_kashidas:!0,cleanup_line_breaks:!0,cleanup_rlm:!0,cleanup_spacing:!0,cleanup_zwnj:!0,decode_htmlentities:!0,fix_arabic_numbers:!0,fix_dashes:!0,fix_diacritics:!0,fix_english_numbers:!0,fix_english_quotes_pairs:!0,fix_english_quotes:!0,fix_hamzeh:!0,fix_hamzeh_arabic:!1,fix_misc_non_persian_chars:!0,fix_misc_spacing:!0,fix_numeral_symbols:!0,fix_perfix_spacing:!0,fix_persian_glyphs:!0,fix_punctuations:!0,fix_question_mark:!0,fix_spacing_for_braces_and_quotes:!0,fix_spacing_for_punctuations:!0,fix_suffix_misc:!0,fix_suffix_spacing:!0,fix_three_dots:!0,kashidas_as_parenthetic:!0,markdown_normalize_braces:!0,markdown_normalize_lists:!0,normalize_dates:!0,normalize_ellipsis:!0,normalize_eol:!0,preserve_braces:!1,preserve_brackets:!1,preserve_comments:!0,preserve_entities:!0,preserve_frontmatter:!0,preserve_HTML:!0,preserve_nbsps:!0,preserve_URIs:!0,remove_diacritics:!1,skip_markdown_ordered_lists_numbers_conversion:!1},Y="۱۲۳۴۵۶۷۸۹۰",ee={"sbquo;":"‚","lsquo;":"‘","lsquor;":"‚","ldquo;":"“","ldquor;":"„","rdquo;":"”","rdquor;":"”","rsquo;":"’","rsquor;":"’","apos;":"'","QUOT;":'"',QUOT:'"',"quot;":'"',quot:'"',"zwj;":"‍","ZWNJ;":"‌","zwnj;":"‌","shy;":"­"},re={"‌ه":"ﻫ","ی‌":"ﻰﻲ","ﺃ":"ﺄﺃ","ﺁ":"ﺁﺂ","ﺇ":"ﺇﺈ","ا":"ﺎا","ب":"ﺏﺐﺑﺒ","پ":"ﭖﭗﭘﭙ","ت":"ﺕﺖﺗﺘ","ث":"ﺙﺚﺛﺜ","ج":"ﺝﺞﺟﺠ","چ":"ﭺﭻﭼﭽ","ح":"ﺡﺢﺣﺤ","خ":"ﺥﺦﺧﺨ","د":"ﺩﺪ","ذ":"ﺫﺬ","ر":"ﺭﺮ","ز":"ﺯﺰ","ژ":"ﮊﮋ","س":"ﺱﺲﺳﺴ","ش":"ﺵﺶﺷﺸ","ص":"ﺹﺺﺻﺼ","ض":"ﺽﺾﺿﻀ","ط":"ﻁﻂﻃﻄ","ظ":"ﻅﻆﻇﻈ","ع":"ﻉﻊﻋﻌ","غ":"ﻍﻎﻏﻐ","ف":"ﻑﻒﻓﻔ","ق":"ﻕﻖﻗﻘ","ک":"ﮎﮏﮐﮑﻙﻚﻛﻜ","گ":"ﮒﮓﮔﮕ","ل":"ﻝﻞﻟﻠ","م":"ﻡﻢﻣﻤ","ن":"ﻥﻦﻧﻨ","ه":"ﻩﻪﻫﻬ","هٔ":"ﮤﮥ","و":"ﻭﻮ","ﺅ":"ﺅﺆ","ی":"ﯼﯽﯾﯿﻯﻰﻱﻲﻳﻴ","ئ":"ﺉﺊﺋﺌ","لا":"ﻼ","ﻹ":"ﻺ","ﻷ":"ﻸ","ﻵ":"ﻶ"};return e.prototype={defaults:J,cleanup:c,convertPersianNumbers:A,flipPunctuations:K,swapQuotes:Q},e});
